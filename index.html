<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">
<title>Redirecting...</title>
<style>
:root {
    --bg-color: #f4f4f5;
    --fg-color: #18181b;
    --border-color: #18181b;
    --accent-color: #18181b;
    --link-color: #0070f3;
    --card-bg: #ffffff;
    --subtle-text: #52525b;
    --slow-transition: all 0.2s ease-out;
}

/* base reset */
* { box-sizing: border-box; margin: 0; padding: 0; -webkit-tap-highlight-color: transparent; }
html, body { height: 100%; } /* removed overflow:hidden to allow scrolling on small screens */
body {
    font-family: 'Ubuntu Mono', monospace;
    color: var(--fg-color);
    padding: 20px;
    font-size: 14px;
    background: var(--bg-color);
    background-size: cover;
    background-position: center;
    background-attachment: fixed;
    display: flex;
    justify-content: center;
    align-items: center;
    overflow-y: auto;
}
body::before { content: ''; position: fixed; top: 0; left: 0; right: 0; bottom: 0; background-color: rgba(255, 255, 255, 0.2); backdrop-filter: blur(8px); z-index: -1; }

 /* small UI for the redirect card (adapted from your original dark version) */
*{margin:0;padding:0;box-sizing:border-box;font-family:"Inter",sans-serif;}
.wrap{
  position:relative;
  padding:clamp(20px,4vw,34px);
  border-radius:14px;
  border:2px solid var(--border-color);
  background:var(--card-bg);
  max-width:94%;
  width:380px;
  box-shadow: 5px 5px 0px var(--accent-color);
  transition: var(--slow-transition);
}
h2{font-weight:600;font-size:clamp(17px,4vw,22px);margin-bottom:8px;color:var(--fg-color);}
p{font-size:clamp(14px,3.3vw,16px);color:var(--subtle-text);}
#timer{font-weight:700;color:var(--fg-color);}
.bar{
  margin:clamp(14px,4vw,20px) 0;
  font-size:clamp(22px,7vw,28px);
  letter-spacing:2px;
  color:var(--fg-color);
}
/* button uses your design tokens */
.btn{
  padding:clamp(9px,2vw,12px) clamp(18px,5vw,28px);
  border-radius:8px;
  border:2px solid var(--border-color);
  background:transparent;
  color:var(--fg-color);
  cursor:pointer;
  transition:var(--slow-transition);
  font-weight:700;
  width:100%;
  box-sizing:border-box;
}
.btn:hover{
  background:var(--fg-color);
  color:var(--card-bg);
  box-shadow:0 0 14px rgba(0,0,0,0.06);
}

/* accessibility focus */
:focus-visible { outline: 3px solid rgba(0,112,243,0.12); outline-offset: 3px; border-radius:6px; }
button:focus-visible, a:focus-visible, input:focus-visible { box-shadow: 0 0 0 4px rgba(0,112,243,0.06); }

/* reduced motion support */
@media (prefers-reduced-motion: reduce) {
  * { animation-duration: 0.001ms !important; animation-iteration-count: 1 !important; transition: none !important; }
}

/* small responsive tweaks */
@media (max-width: 420px) {
  .wrap { padding: 16px; width: calc(100% - 40px); }
  .bar { font-size: 20px; }
  h2 { font-size: 18px; }
}
</style>
</head>
<body>
<div class="wrap" role="status" aria-live="polite">
  <h2>Redirecting to Control Panel...</h2>
  <p>In <span id="timer" aria-atomic="true">10</span> seconds</p>
  <div class="bar" id="bar" aria-hidden="true">▱▱▱▱▱▱▱▱▱▱</div>
  <button class="btn" id="btn" aria-label="Check Plans">Check Plans</button>
</div>

<script>
/* ===== CONFIG ===== */
const REDIRECT_TO = "/go";        // redirect setelah countdown selesai
const BUTTON_LINK = "/promo";     // redirect tombol
const TOTAL = 10;                 // banyak blok progress bar
const START = 10;                 // detik countdown
/* =================== */

let s = START;
const timer = document.getElementById("timer");
const bar   = document.getElementById("bar");
const btn   = document.getElementById("btn");

let userClicked = false;

btn.addEventListener('click', (e) => {
  userClicked = true;
  // small accessibility: announce navigation intent before redirect
  try { btn.setAttribute('aria-busy', 'true'); } catch {}
  window.location.href = BUTTON_LINK;
});

function updateBar(secLeft){
  const filled = Math.min(TOTAL, Math.max(0, Math.floor((START - secLeft) * TOTAL / START)));
  // use solid and empty blocks
  bar.textContent = "▰".repeat(filled) + "▱".repeat(TOTAL - filled);
}

updateBar(s);

const countdown = setInterval(()=>{
  if (userClicked) return; // stop auto-redirect if user clicked button

  s--;
  timer.textContent = s;
  updateBar(s);

  if(s <= 0){
    clearInterval(countdown);
    if (!userClicked) {
      // gentle micro-delay so screen readers can hear change
      setTimeout(()=> window.location.href = REDIRECT_TO, 80);
    }
  }
}, 1000);
</script>
</body>
</html>
